# BrainBomb

## 마인드맵 제작 웹페이지

### 구분 및 기획

#### 제작 계획

- 3페이지 이내의 쉽게 마인드맵을 그릴수 있는 웹페이지 제작.
- 로그인 및 인증 필요없이 단순 서비스 제공 (정적페이지)

#### 기획 의도

- 새로운 툴 및 기술 학습
- 마인드맵을 그리는 웹을 찾던 도중 매우 간단하고 정확히 마인드맵의 기능만 하는 웹페이지가 없다고 생각됨으로 간단 명료한 서비스제작의도

#### 기술 스택

- 사용 기술 : React, TypeScript, Redux, SCSS
- 새로 사용 기술 : Lodash, Styled-Component

### 제작

#### 예정 기능

- 일반적인 마인드 맵을 제작하지만, 다른 복잡한 절차 필요없이 사용가능.
- 이미지 및 pdf 등의 포멧변화를 통해 사용자가 원하는 형식으로 다운로드 가능.
- 마인드맵의 format에 여러가지 선택지를 만들어 사용자가 원하는 방식으로 제작.
- 마인드맵에서 각 element의 세부설정 가능하도록 함(색상, 형태, 선, 순서 등등);

### 스캐치

#### 페이지 1

- 마인드맵 제작 페이지
  ~~~![brainbomb_first](./src/assets/README/brainbomb_first.png)~~~

#### 페이지 2

- 마인드맵 사용법 페이지
  ~~~![brainbomb_second](./src/assets/README/brainbomb_second.png)~~~

#### 페이지 3

- 마인드맵 contact 페이지
  ~~~![brainbomb_third](./src/assets/README/brainbomb_third.png)~~~

# Work Through

230310

- 아이디어 구성 및 계획

230312

- 구체적 계획 및 기능 구상

230314

- 헤더 및 재사용 컴포넌트 제작

230316

- 마인드맵 기능 제작 (1일차)

230318

- 마인드맵 기능 제작 (2일차)
  - 마인드맵 자식엘리먼트 관련

230319

- 마인드맵 기능 제작 (3일차)
  - 마인드맵 자식엘리먼트 생성 및 삭제
  - 위치에 따른 엘리먼트 생성

230322

- 마인드맵 기능 관련 재구성 및 검토

  - CANVAS를 사용한 뷰 구성 혹은 일반 엘리먼트를 사용한 뷰 구성
  - 엘리먼트를 사용한 방식에는 드래그/드롭 기능을 통해 보다 유연한 기능을 제작하고자 함.

230323

- redux-toolkit / redux-persist를 통해 사용한 마인드맵을 브라우저(storage)에 좌표를 저장.

- 캔버스를 통한 방식에는 이동 및 클릭과같은 이벤트를 할당하기에는 다소 무리가 있어 일반적인 엘리먼트를 사용하나 일정부분 캔버스를 혼합 사용한 방식을 시도.

---

230426

- 구성정리 및 추가

1. dragsection 분리.
2. eleSlice (redux) 생성. 마인드맵 엘리먼트의 삭제 및 생성(element id 생성 - randomid.tsx 참고) 관리.
3. 마인드맵 엘리먼트의 매개변수 타입 변경. 받는 id(id) 및 초기 이름을 위한 number(index) 를 받아 엘리먼트의 id 및 text에 할당.
4. HEAD 엘리먼트는 삭제 불가(삭제버튼X)

---

230429

- 선 연결

1. 연결 계산 - 삼각형 형태의 x,y + tan(역탄젠트사용) + 대각선(피타고라스) + 의문 => tranform-origin이 왜 0 0px에서 정상작동하는가.
2. 연결 성공 - 계산완료 및 useEffect + onDrag(redux)를 사용한 부드러운 연결효과
3. 컴포넌트 분리후 오류 - 초기위치 오류, 연결선 y좌표에따라 연결분리됨.

---

230430

- 통합 및 오류수정

1. eleSlice에 pathSlice를 통합. - 이에따른 위치 저장/수정/가져오기 방식 변경 , element추가시 자동적으로 위치가 x:0,y:0로 저장됨으로 230429에서 발생한 초기위치 오류 해결(컴포넌트추가시 초기위치를 알 수 없기에 연결선 컴포넌트(Line)에서 위치좌표(x,y)를 가져오는 시기에 발생했던 오류)

---

230501

- 사이트메뉴 제작 및 최적화

1. 사이드 메뉴 - 마인드맵 순서리스트 , element 수정, element info
2. 최적화 - 하나의 엘리먼트를 움직일때마다 모든 element가 리랜더링 되는 상황 => 다수의 element생성시 딜레이 체감.

- line엘리먼트의 useEffect deps를 redux-ele에서 개별적인 컴포넌트로 변경 - 아래의 이유로 무의미.

- React.Memo를 사용 -> 컴포넌트 생성이 map()을 사용하기에 redux의 eleSlice의 변화가 생기면 모든 ele의 재생성 => 불가피한 컴포넌트 리랜더링.

---

### 작업

- 선 연결(connector)기능

1. path, ele 리덕스를 통해 위치와 id 가져오기 가능( 통합하는것도 괜찮아보임).
2. path를 통해 선의 위치 및 transform 값 계산.
3. 계산식은 temp파일의 코드 분석 후 새로운 코드로 구성하여 사용.
